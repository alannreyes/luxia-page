import Link from 'next/link'
import AuthButton from '@/components/AuthButton'

// 52+ platillos organizados por nivel
// Prioridad: APIs cloud (Gemini, Claude, OpenAI) primero, modelos locales al final
const dishes = [
  // APRENDIZ: Empezar con IA en la nube (gratis/fÃ¡cil)
  { slug: 'chatbot-gemini', titleEs: 'Chatbot con Gemini API', titleEn: 'Chatbot with Gemini API', level: 'aprendiz', icon: 'âœ¨' },
  { slug: 'chatbot-claude', titleEs: 'Chatbot con Claude API', titleEn: 'Chatbot with Claude API', level: 'aprendiz', icon: 'ğŸŸ ' },
  { slug: 'chatbot-openai', titleEs: 'Chatbot con OpenAI API', titleEn: 'Chatbot with OpenAI API', level: 'aprendiz', icon: 'ğŸŸ¢' },
  { slug: 'claude-code-intro', titleEs: 'IntroducciÃ³n a Claude Code', titleEn: 'Introduction to Claude Code', level: 'aprendiz', icon: 'âŒ¨ï¸' },
  { slug: 'hello-terminal', titleEs: 'Hola Mundo en Terminal', titleEn: 'Hello World in Terminal', level: 'aprendiz', icon: 'ğŸ–¥ï¸' },
  { slug: 'first-repo', titleEs: 'Mi Primer Repositorio', titleEn: 'My First Repository', level: 'aprendiz', icon: 'ğŸ“š' },
  { slug: 'dotfiles', titleEs: 'Mi ConfiguraciÃ³n Dotfiles', titleEn: 'My Dotfiles Setup', level: 'aprendiz', icon: 'âš™ï¸' },
  { slug: 'static-page', titleEs: 'PÃ¡gina Web EstÃ¡tica', titleEn: 'Static Web Page', level: 'aprendiz', icon: 'ğŸŒ' },
  { slug: 'dev-environment', titleEs: 'Mi Ambiente de Desarrollo', titleEn: 'My Dev Environment', level: 'aprendiz', icon: 'ğŸ› ï¸' },
  { slug: 'first-script', titleEs: 'Mi Primer Script Bash', titleEn: 'My First Bash Script', level: 'aprendiz', icon: 'ğŸ“œ' },
  { slug: 'docker-hello', titleEs: 'Docker Hello World', titleEn: 'Docker Hello World', level: 'aprendiz', icon: 'ğŸ³' },
  { slug: 'json-api-fetch', titleEs: 'Consumir una API JSON', titleEn: 'Consume a JSON API', level: 'aprendiz', icon: 'ğŸ”—' },
  { slug: 'markdown-notes', titleEs: 'Sistema de Notas Markdown', titleEn: 'Markdown Notes System', level: 'aprendiz', icon: 'ğŸ“' },
  { slug: 'git-collaboration', titleEs: 'Colaborar con Git', titleEn: 'Collaborate with Git', level: 'aprendiz', icon: 'ğŸ¤' },
  { slug: 'chatbot-local', titleEs: 'Chatbot Local con Ollama', titleEn: 'Local Chatbot with Ollama', level: 'aprendiz', icon: 'ğŸ ' },

  // COCINERO: Web UI para chatbots + proyectos web
  { slug: 'chat-web-ui', titleEs: 'Chat IA con Interfaz Web', titleEn: 'AI Chat with Web UI', level: 'cocinero', icon: 'ğŸ’¬' },
  { slug: 'react-todo', titleEs: 'Todo App con React', titleEn: 'Todo App with React', level: 'cocinero', icon: 'âœ…' },
  { slug: 'api-rest-basic', titleEs: 'API REST con Express', titleEn: 'REST API with Express', level: 'cocinero', icon: 'ğŸ”Œ' },
  { slug: 'python-cli', titleEs: 'CLI Tool con Python', titleEn: 'CLI Tool with Python', level: 'cocinero', icon: 'ğŸ' },
  { slug: 'landing-page', titleEs: 'Landing Page Responsive', titleEn: 'Responsive Landing Page', level: 'cocinero', icon: 'ğŸ“±' },
  { slug: 'portfolio', titleEs: 'Portfolio Personal', titleEn: 'Personal Portfolio', level: 'cocinero', icon: 'ğŸ’¼' },
  { slug: 'blog-static', titleEs: 'Blog EstÃ¡tico', titleEn: 'Static Blog', level: 'cocinero', icon: 'ğŸ“°' },
  { slug: 'form-validation', titleEs: 'Formulario con ValidaciÃ³n', titleEn: 'Form with Validation', level: 'cocinero', icon: 'ğŸ“‹' },
  { slug: 'weather-app', titleEs: 'App del Clima', titleEn: 'Weather App', level: 'cocinero', icon: 'ğŸŒ¤ï¸' },
  { slug: 'calculator', titleEs: 'Calculadora Web', titleEn: 'Web Calculator', level: 'cocinero', icon: 'ğŸ”¢' },
  { slug: 'quiz-game', titleEs: 'Quiz Interactivo', titleEn: 'Interactive Quiz', level: 'cocinero', icon: 'ğŸ®' },
  { slug: 'countdown-timer', titleEs: 'Timer con Notificaciones', titleEn: 'Timer with Notifications', level: 'cocinero', icon: 'â°' },
  { slug: 'image-gallery', titleEs: 'GalerÃ­a de ImÃ¡genes', titleEn: 'Image Gallery', level: 'cocinero', icon: 'ğŸ–¼ï¸' },
  { slug: 'api-fastapi', titleEs: 'API con FastAPI', titleEn: 'API with FastAPI', level: 'cocinero', icon: 'âš¡' },
  { slug: 'scraper-basic', titleEs: 'Web Scraper BÃ¡sico', titleEn: 'Basic Web Scraper', level: 'cocinero', icon: 'ğŸ•·ï¸' },

  // CHEF: Despliegue pÃºblico con auth, HTTPS, memoria
  { slug: 'public-ai-chat', titleEs: 'Chat IA PÃºblico con Auth', titleEn: 'Public AI Chat with Auth', level: 'chef', icon: 'ğŸŒ' },
  { slug: 'nextjs-blog', titleEs: 'Blog con Next.js + MDX', titleEn: 'Blog with Next.js + MDX', level: 'chef', icon: 'â–²' },
  { slug: 'auth-firebase', titleEs: 'Auth con Firebase Google', titleEn: 'Auth with Firebase Google', level: 'chef', icon: 'ğŸ”' },
  { slug: 'crud-postgres', titleEs: 'CRUD con PostgreSQL', titleEn: 'CRUD with PostgreSQL', level: 'chef', icon: 'ğŸ˜' },
  { slug: 'realtime-chat', titleEs: 'Chat en Tiempo Real', titleEn: 'Real-time Chat', level: 'chef', icon: 'ğŸ’¬' },
  { slug: 'file-upload', titleEs: 'Subida de Archivos S3', titleEn: 'S3 File Upload', level: 'chef', icon: 'ğŸ“¤' },
  { slug: 'payment-stripe', titleEs: 'Pagos con Stripe', titleEn: 'Payments with Stripe', level: 'chef', icon: 'ğŸ’³' },
  { slug: 'email-notifications', titleEs: 'Emails Transaccionales', titleEn: 'Transactional Emails', level: 'chef', icon: 'ğŸ“§' },
  { slug: 'docker-deploy', titleEs: 'Deploy con Docker', titleEn: 'Deploy with Docker', level: 'chef', icon: 'ğŸš€' },
  { slug: 'github-actions', titleEs: 'CI/CD con GitHub Actions', titleEn: 'CI/CD with GitHub Actions', level: 'chef', icon: 'âš™ï¸' },
  { slug: 'api-testing', titleEs: 'Testing de APIs', titleEn: 'API Testing', level: 'chef', icon: 'ğŸ§ª' },
  { slug: 'mobile-expo', titleEs: 'App MÃ³vil con Expo', titleEn: 'Mobile App with Expo', level: 'chef', icon: 'ğŸ“±' },
  { slug: 'push-notifications', titleEs: 'Push Notifications', titleEn: 'Push Notifications', level: 'chef', icon: 'ğŸ””' },
  { slug: 'webhook-receiver', titleEs: 'Receptor de Webhooks', titleEn: 'Webhook Receiver', level: 'chef', icon: 'ğŸª' },
  { slug: 'redis-cache', titleEs: 'Cache con Redis', titleEn: 'Cache with Redis', level: 'chef', icon: 'âš¡' },
  { slug: 'arduino-sensor', titleEs: 'Arduino + MQTT', titleEn: 'Arduino + MQTT', level: 'chef', icon: 'ğŸ”Œ' },
  { slug: 'dashboard-analytics', titleEs: 'Dashboard de Analytics', titleEn: 'Analytics Dashboard', level: 'chef', icon: 'ğŸ“Š' },

  // MASTER CHEF (IA y Avanzado - 10 platillos)
  { slug: 'rag-documents', titleEs: 'RAG con Documentos PDF', titleEn: 'RAG with PDF Documents', level: 'master', icon: 'ğŸ“š' },
  { slug: 'vector-search', titleEs: 'BÃºsqueda Vectorial', titleEn: 'Vector Search', level: 'master', icon: 'ğŸ”' },
  { slug: 'mcp-server', titleEs: 'Servidor MCP Custom', titleEn: 'Custom MCP Server', level: 'master', icon: 'ğŸ”§' },
  { slug: 'ai-agent', titleEs: 'Agente IA AutÃ³nomo', titleEn: 'Autonomous AI Agent', level: 'master', icon: 'ğŸ¤–' },
  { slug: 'image-classifier', titleEs: 'Clasificador de ImÃ¡genes', titleEn: 'Image Classifier', level: 'master', icon: 'ğŸ‘ï¸' },
  { slug: 'voice-assistant', titleEs: 'Asistente de Voz', titleEn: 'Voice Assistant', level: 'master', icon: 'ğŸ™ï¸' },
  { slug: 'multimodal-app', titleEs: 'App Multimodal', titleEn: 'Multimodal App', level: 'master', icon: 'ğŸ¨' },
  { slug: 'fine-tuning', titleEs: 'Fine-tuning de Modelo', titleEn: 'Model Fine-tuning', level: 'master', icon: 'ğŸ¯' },
  { slug: 'ai-code-review', titleEs: 'Code Review con IA', titleEn: 'AI Code Review', level: 'master', icon: 'ğŸ‘¨â€ğŸ’»' },
  { slug: 'full-saas', titleEs: 'SaaS Completo con IA', titleEn: 'Full SaaS with AI', level: 'master', icon: 'ğŸ†' },
]

const levelLabels = {
  aprendiz: { es: 'ğŸ§‘â€ğŸ“ Aprendiz', en: 'ğŸ§‘â€ğŸ“ Apprentice' },
  cocinero: { es: 'ğŸ§‘â€ğŸ³ Cocinero', en: 'ğŸ§‘â€ğŸ³ Cook' },
  chef: { es: 'ğŸ‘¨â€ğŸ³ Chef', en: 'ğŸ‘¨â€ğŸ³ Chef' },
  master: { es: 'ğŸ‘¨â€ğŸ³ğŸ‘‘ Master Chef', en: 'ğŸ‘¨â€ğŸ³ğŸ‘‘ Master Chef' },
}

interface LayoutProps {
  children: React.ReactNode
  params: Promise<{ locale: string }>
}

export default async function CookingLayout({ children, params }: LayoutProps) {
  const resolvedParams = await params
  const locale = resolvedParams.locale as 'es' | 'en'
  const isSpanish = locale === 'es'

  const groupedDishes = {
    aprendiz: dishes.filter(d => d.level === 'aprendiz'),
    cocinero: dishes.filter(d => d.level === 'cocinero'),
    chef: dishes.filter(d => d.level === 'chef'),
    master: dishes.filter(d => d.level === 'master'),
  }

  return (
    <div className="min-h-screen bg-orange-50">
      {/* Header */}
      <header className="bg-orange-600 text-white py-4 px-6 sticky top-0 z-50">
        <div className="max-w-7xl mx-auto flex items-center justify-between">
          <Link href={`/${locale}`} className="flex items-center gap-2">
            <span className="text-xl font-bold">luxIA</span>
            <span className="text-orange-200">/</span>
            <span className="text-orange-100 flex items-center gap-1">
              ğŸ‘¨â€ğŸ³ {isSpanish ? 'cocinando' : 'cooking'}
            </span>
          </Link>
          <nav className="flex items-center gap-4">
            <Link
              href={`/${locale}/learning`}
              className="text-sm text-blue-200 hover:text-white transition flex items-center gap-1"
            >
              ğŸ“– {isSpanish ? 'Ir a Learning' : 'Go to Learning'}
            </Link>
            <Link
              href={isSpanish ? '/en/cooking' : '/es/cooking'}
              className="text-sm text-orange-200 hover:text-white transition"
            >
              {isSpanish ? 'English' : 'EspaÃ±ol'}
            </Link>
            <AuthButton locale={locale} variant="dark" />
          </nav>
        </div>
      </header>

      <div className="max-w-7xl mx-auto flex">
        {/* Sidebar */}
        <aside className="w-72 bg-white border-r border-orange-200 min-h-[calc(100vh-64px)] sticky top-16 hidden lg:block overflow-y-auto">
          <nav className="p-4">
            {Object.entries(groupedDishes).map(([level, items]) => (
              <div key={level} className="mb-6">
                <h2 className="text-xs font-semibold text-orange-600 uppercase tracking-wider mb-2 px-3">
                  {levelLabels[level as keyof typeof levelLabels][isSpanish ? 'es' : 'en']}
                </h2>
                <ul className="space-y-1">
                  {items.map((dish) => (
                    <li key={dish.slug}>
                      <Link
                        href={`/${locale}/cooking/${dish.slug}`}
                        className="flex items-center gap-2 px-3 py-2 text-sm text-slate-700 hover:bg-orange-100 rounded-lg transition"
                      >
                        <span>{dish.icon}</span>
                        <span className="truncate">{isSpanish ? dish.titleEs : dish.titleEn}</span>
                      </Link>
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </nav>
        </aside>

        {/* Main content */}
        <main className="flex-1 p-8">
          {children}
        </main>
      </div>

      {/* Footer */}
      <footer className="bg-orange-700 text-orange-100 py-8 px-6">
        <div className="max-w-7xl mx-auto text-center text-sm">
          <p>Â© 2026 luxIA.us - {isSpanish ? 'Todos los derechos reservados' : 'All rights reserved'}</p>
          <p className="mt-2">
            {isSpanish ? 'Creado por' : 'Created by'} Alann Reyes
          </p>
        </div>
      </footer>
    </div>
  )
}
